<% provide(:title, 'Reset Password') %>
<body class="login">
<!-- BEGIN SIDEBAR TOGGLER BUTTON -->
<div class="menu-toggler sidebar-toggler">
</div>
<!-- END SIDEBAR TOGGLER BUTTON -->
<!-- BEGIN LOGO -->
<div class="logo">
	<a href="/"><img src="https://s3.amazonaws.com/coffeemobile/logo-small.png" /></a>
</div>
<!-- END LOGO -->
<!-- BEGIN LOGIN -->
<div class="content">
	<!-- BEGIN FORGOT PASSWORD FORM -->
	<%= form_tag password_resets_path, :id => "reset_password_form", :method => :post do %>
	<div style="margin:0;padding:0;display:inline"></div>
		<h3>Reset Password</h3>
		<p class="hint">
			Send the verification link to the email address below.
		</p>
		<div class="form-group">
			<input class="form-control placeholder-no-fix" type="text" autocomplete="off" id="email" placeholder="Email" name="email">
		</div>
		<div class="form-actions">
			
			<button type="button" id="finish_reset" class="btn btn-success uppercase pull-right">Submit</button>
		</div>
	<%end%>
	<!-- END FORGOT PASSWORD FORM -->
</div>
<div class="copyright">
	 2014 Â© Coffee Enterprise. All Rights Reserved
</div>
<!-- END LOGIN -->
<%= javascript_include_tag "login_page" %>
<script>
jQuery(document).ready(function() {     
	Metronic.init(); // init metronic core components
	Layout.init(); // init current layout
	Login.init();
});
</script>
<!-- END JAVASCRIPTS -->
</body>
<script>
$('#finish_reset').click(function() {
   	if( !$("#email").val()) {
		if ( !$("#email").val()) {
				$("#email").attr("style", "border: 1px solid #b94a48; background-color: #eed3d7;");
			} else {
				$("#email").attr("style", "border: 1px solid #dedede; background-color: #efefef;");
			}
		} else if (!validateEmail($("#email").val())) {
			alert("Error: The email address provided is invalid!");
			$("#email").attr("style", "border: 1px solid #b94a48; background-color: #eed3d7;");
			$("#email").focus();
		} else {
			$("#reset_password_form").submit();
			//console.log("All Good");
		}
	});

	function validateEmail(email) { 
		var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
		return re.test(email);
	} 
</script>