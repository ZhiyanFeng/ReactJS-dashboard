'use strict';exports.__esModule=true;var _classCallCheck2=require('babel-runtime/helpers/classCallCheck');var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _possibleConstructorReturn2=require('babel-runtime/helpers/possibleConstructorReturn');var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require('babel-runtime/helpers/inherits');var _inherits3=_interopRequireDefault(_inherits2);var _class;var _react=require('react');var _react2=_interopRequireDefault(_react);var _classnames=require('classnames');var _classnames2=_interopRequireDefault(_classnames);var _reactRouter=require('react-router');var _TextFieldGroup=require('./TextFieldGroup');var _TextFieldGroup2=_interopRequireDefault(_TextFieldGroup);var _reactRedux=require('react-redux');var _authActions=require('../../redux/actions/authActions');var _common=require('../common');var _loginValidation=require('./loginValidation');var _loginValidation2=_interopRequireDefault(_loginValidation);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var LoginForm=(0,_reactRouter.withRouter)(_class=function(_React$Component){(0,_inherits3.default)(LoginForm,_React$Component);function LoginForm(props){(0,_classCallCheck3.default)(this,LoginForm);var _this=(0,_possibleConstructorReturn3.default)(this,_React$Component.call(this,props));_this.state={email:'',password:'',errors:{},isLoading:false};//this.onSubmit = this.onSubmit.bind(this);
return _this;}LoginForm.prototype.isValid=function isValid(){var _validateInput=(0,_loginValidation2.default)(this.state),errors=_validateInput.errors,isValid=_validateInput.isValid;if(!isValid){this.setState({errors:errors});}return isValid;};LoginForm.prototype.onSubmit=function onSubmit(e){var _this2=this;e.preventDefault();if(this.isValid()){this.setState({errors:{},isLoading:true});this.props.login(this.state).then(function(res){return _this2.context.router.push('/');},function(err){return _this2.setState({errors:err.data.errors,isLoading:false});});}};LoginForm.prototype.onChange=function onChange(e){var _setState;this.setState((_setState={},_setState[e.target.name]=e.target.value,_setState));};LoginForm.prototype.back=function back(e){e.preventDefault();e.stopPropagation();this.props.router.goBack();};LoginForm.prototype.componentDidMount=function componentDidMount(){$('html').addClass('authentication');};LoginForm.prototype.componentWillUnmount=function componentWillUnmount(){$('html').removeClass('authentication');};LoginForm.prototype.getPath=function getPath(path){var dir=this.props.location.pathname.search('rtl')!==-1?'rtl':'ltr';path='/'+dir+'/'+path;return path;};LoginForm.prototype.render=function render(){var _state=this.state,email=_state.email,password=_state.password,errors=_state.errors,isLoading=_state.isLoading;return _react2.default.createElement('div',{id:'auth-container',className:'login',style:{"margin":"200px auto 0 auto"}},_react2.default.createElement('div',{id:'auth-row'},_react2.default.createElement('div',{id:'auth-cell'},_react2.default.createElement(_common.Grid,null,_react2.default.createElement(_common.Row,null,_react2.default.createElement(_common.Col,{sm:4,smOffset:4,xs:10,xsOffset:1,collapseLeft:true,collapseRight:true},_react2.default.createElement(_common.PanelContainer,{controls:false},_react2.default.createElement(_common.Panel,null,_react2.default.createElement(_common.PanelBody,{style:{padding:0}},_react2.default.createElement('div',{className:'text-center bg-darkblue fg-white'},_react2.default.createElement('h3',{style:{margin:0,padding:25}},'Sign in to Shyft')),_react2.default.createElement('div',{className:'bg-hoverblue fg-black50 text-center',style:{padding:12.5}},_react2.default.createElement('div',null,'You need to sign in for those awesome features')),_react2.default.createElement('div',null,_react2.default.createElement('div',{style:{padding:0,paddingTop:0,paddingBottom:0,margin:'auto',marginBottom:0,marginTop:25}},errors.form&&_react2.default.createElement('div',{className:'alert alert-danger'},errors.form),_react2.default.createElement(_common.Form,{onSubmit:this.onSubmit.bind(this)},_react2.default.createElement(_TextFieldGroup2.default,{field:'email',label:'Email   ',value:email,placeholder:'yourname@myshyft.com',error:errors.email,onChange:this.onChange.bind(this)}),_react2.default.createElement(_TextFieldGroup2.default,{field:'password',label:'Password',value:password,placeholder:'password',error:errors.password,onChange:this.onChange.bind(this),type:'password'}),_react2.default.createElement(_common.FormGroup,null,_react2.default.createElement(_common.Grid,null,_react2.default.createElement(_common.Row,null,_react2.default.createElement(_common.Col,{xs:6,collapseLeft:true,collapseRight:true,style:{paddingTop:10}},_react2.default.createElement(_reactRouter.Link,{to:this.getPath.call(this,'signup')},'Create a Shyft account')),_react2.default.createElement(_common.Col,{xs:6,collapseLeft:true,collapseRight:true,className:'text-right'},_react2.default.createElement(_common.Button,{outlined:true,lg:true,type:'submit',bsStyle:'blue',disabled:isLoading},'Login')))))))))))))))));};return LoginForm;}(_react2.default.Component))||_class;LoginForm.propTypes={login:_react2.default.PropTypes.func.isRequired};LoginForm.contextTypes={router:_react2.default.PropTypes.object.isRequired};var _default=(0,_reactRedux.connect)(null,{login:_authActions.login})(LoginForm);exports.default=_default;;var _temp=function(){if(typeof __REACT_HOT_LOADER__==='undefined'){return;}__REACT_HOT_LOADER__.register(LoginForm,'LoginForm','src/components/login/login.js');__REACT_HOT_LOADER__.register(_default,'default','src/components/login/login.js');}();;